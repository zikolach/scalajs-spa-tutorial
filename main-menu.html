<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Main menu | Scala.js SPA-tutorial</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.5.2">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="./dashboard.html" />
    
    
    <link rel="prev" href="./routing.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="2.1.2" data-chapter-title="Main menu" data-filepath="main-menu.md" data-basepath="." data-revision="Tue Apr 12 2016 23:08:14 GMT+0300 (FLE Daylight Time)">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="getting-started.html">
            
                
                    <a href="./getting-started.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Getting started
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="application-structure.html">
            
                
                    <a href="./application-structure.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Application structure
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="the-client.html">
            
                
                    <a href="./the-client.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        The Client
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="routing.html">
            
                
                    <a href="./routing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Routing
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="2.1.2" data-path="main-menu.html">
            
                
                    <a href="./main-menu.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.2.</b>
                        
                        Main menu
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="dashboard.html">
            
                
                    <a href="./dashboard.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.</b>
                        
                        Dashboard
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="css-in-scala.html">
            
                
                    <a href="./css-in-scala.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.4.</b>
                        
                        CSS in Scala
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="integrating-javascript-components.html">
            
                
                    <a href="./integrating-javascript-components.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.5.</b>
                        
                        Integrating JavaScript components
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="todo-module-and-data-flow.html">
            
                
                    <a href="./todo-module-and-data-flow.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.6.</b>
                        
                        Todo module and data flow
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.7" data-path="autowire-and-boopickle.html">
            
                
                    <a href="./autowire-and-boopickle.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.7.</b>
                        
                        Autowire and BooPickle
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="server-side.html">
            
                
                    <a href="./server-side.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Server side
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="testing.html">
            
                
                    <a href="./testing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Testing
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="debugging.html">
            
                
                    <a href="./debugging.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Debugging
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="logging.html">
            
                
                    <a href="./logging.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Logging
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="sbt-build-definition.html">
            
                
                    <a href="./sbt-build-definition.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        SBT build definition
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="using-resources-from-webjars.html">
            
                
                    <a href="./using-resources-from-webjars.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Using resources from WebJars
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="production-build.html">
            
                
                    <a href="./production-build.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Production build
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="faq.html">
            
                
                    <a href="./faq.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        FAQ
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="what-next.html">
            
                
                    <a href="./what-next.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        What next?
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Scala.js SPA-tutorial</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="main-menu">Main menu</h1>
<p>The main menu is just another React component that is given the current location and the router as properties. The contents of the menu is defined
statically within the class itself, because the referred locations are anyway all known at compile time. For other kinds of menus you&apos;d want to use
a dynamic system, but static is just fine here.</p>
<pre><code class="lang-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Props</span>(</span>ctl: <span class="hljs-type">RouterCtl</span>[<span class="hljs-type">Loc</span>], currentLoc: <span class="hljs-type">Loc</span>, proxy: <span class="hljs-type">ModelProxy</span>[<span class="hljs-type">Option</span>[<span class="hljs-type">Int</span>]])

<span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MenuItem</span>(</span>idx: <span class="hljs-type">Int</span>, label: (<span class="hljs-type">Props</span>) =&gt; <span class="hljs-type">ReactNode</span>, icon: <span class="hljs-type">Icon</span>, location: <span class="hljs-type">Loc</span>)

<span class="hljs-comment">// build the Todo menu item, showing the number of open todos</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">buildTodoMenu</span>(</span>props: <span class="hljs-type">Props</span>): <span class="hljs-type">ReactNode</span> = {
  <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">todoCount</span> =</span> props.proxy().getOrElse(<span class="hljs-number">0</span>)
  <span class="hljs-type">Seq</span>(
    &lt;.span(<span class="hljs-string">&quot;Todo &quot;</span>),
    todoCount &gt; <span class="hljs-number">0</span> ?= &lt;.span(bss.labelOpt(<span class="hljs-type">CommonStyle</span>.danger), bss.labelAsBadge, todoCount)
  )
}

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">menuItems</span> =</span> <span class="hljs-type">Seq</span>(
  <span class="hljs-type">MenuItem</span>(<span class="hljs-number">1</span>, _ =&gt; <span class="hljs-string">&quot;Dashboard&quot;</span>, <span class="hljs-type">Icon</span>.dashboard, <span class="hljs-type">DashboardLoc</span>),
  <span class="hljs-type">MenuItem</span>(<span class="hljs-number">2</span>, buildTodoMenu, <span class="hljs-type">Icon</span>.check, <span class="hljs-type">TodoLoc</span>)
)
</code></pre>
<p>For each menu item we define a function to generate the label, an icon and the location that was registered in the <code>routerConfig</code>. For Dashboard
the label is simple text, but for Todo we also render the number of open todos, which we get through the <code>ModelProxy</code> property.</p>
<p>To render the menu we just loop over the items and create appropriate tags. For links we need to use the <code>RouterCtl</code> provided in the properties.</p>
<pre><code class="lang-scala"><span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Backend</span>(</span>t: <span class="hljs-type">BackendScope</span>[<span class="hljs-type">Props</span>, _]) {
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mounted</span>(</span>props: <span class="hljs-type">Props</span>) = {
    <span class="hljs-comment">// dispatch a message to refresh the todos</span>
    <span class="hljs-type">Callback</span>.ifTrue(props.proxy.value.isEmpty, props.proxy.dispatch(<span class="hljs-type">RefreshTodos</span>))
  }

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">render</span>(</span>props: <span class="hljs-type">Props</span>) = {
    &lt;.ul(bss.navbar)(
      <span class="hljs-comment">// build a list of menu items</span>
      <span class="hljs-keyword">for</span> (item &lt;- menuItems) <span class="hljs-keyword">yield</span> {
        &lt;.li(^.key := item.idx, (props.currentLoc == item.location) ?= (^.className := <span class="hljs-string">&quot;active&quot;</span>),
          props.router.link(item.location)(item.icon, <span class="hljs-string">&quot; &quot;</span>, item.label(props))
        )
      }
    )
  }
}

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">component</span> =</span> <span class="hljs-type">ReactComponentB</span>[<span class="hljs-type">Props</span>](<span class="hljs-string">&quot;MainMenu&quot;</span>)
  .stateless
  .renderBackend[<span class="hljs-type">Backend</span>]
  .componentDidMount(scope =&gt; scope.backend.mounted(scope.props))
  .build
</code></pre>
<p>Ok, we&apos;ve got the HTML page defined, menu generated and the active component (Dashboard) within the placeholder, what happens next?</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./routing.html" class="navigation navigation-prev " aria-label="Previous page: Routing"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./dashboard.html" class="navigation navigation-next " aria-label="Next page: Dashboard"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
